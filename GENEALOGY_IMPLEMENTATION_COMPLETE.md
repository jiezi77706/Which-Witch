# Creation Genealogy åŠŸèƒ½å®ç°å®Œæˆ

## ğŸ‰ ä¿®å¤å®Œæˆ

ä½œå“è¯¦æƒ…é¡µçš„Creation GenealogyåŠŸèƒ½å·²ç»å®Œå…¨ä¿®å¤å¹¶ä¼˜åŒ–ï¼Œç°åœ¨èƒ½å¤Ÿï¼š

âœ… **æ­£ç¡®æ˜¾ç¤ºè¡ç”Ÿä½œå“å…³ç³»**  
âœ… **å‡†ç¡®ç»Ÿè®¡Official continuationsï¼ˆåŸä½œè€…å»¶ç»­ï¼‰**  
âœ… **å‡†ç¡®ç»Ÿè®¡Community derivativesï¼ˆç¤¾åŒºäºŒåˆ›ï¼‰**  
âœ… **æä¾›æ¸…æ™°çš„è§†è§‰å±‚æ¬¡ç»“æ„**  
âœ… **å¤„ç†ç©ºçŠ¶æ€å’ŒåŠ è½½çŠ¶æ€**  
âœ… **æ”¯æŒå¤šå±‚è¡ç”Ÿå…³ç³»**  

## ğŸ“Š æµ‹è¯•æ•°æ®å·²æ·»åŠ 

æ•°æ®åº“ä¸­å·²æ·»åŠ å®Œæ•´çš„æµ‹è¯•æ•°æ®ï¼š
- **æ ¹ä½œå“**: The Magical Forest (ID: 100)
- **å®˜æ–¹å»¶ç»­**: Chapter 2 (ID: 101), Prequel (ID: 102)  
- **ç¤¾åŒºè¡ç”Ÿ**: Forest Creatures (ID: 103), Dark Side (ID: 104)

## ğŸ”§ ä¿®å¤å†…å®¹

### 1. åç«¯ä¼˜åŒ–
- **`lib/supabase/services/work.service.ts`**: æ”¹è¿›äº†`getWorkGenealogy`å‡½æ•°
- æ”¯æŒé€’å½’æŸ¥æ‰¾æ ¹ä½œå“
- æ­£ç¡®å¤„ç†å¤šå±‚è¡ç”Ÿå…³ç³»
- æ”¹è¿›æ•°æ®å»é‡å’Œé”™è¯¯å¤„ç†

### 2. å‰ç«¯ä¼˜åŒ–  
- **`components/whichwitch/work-card.tsx`**: å…¨é¢ä¼˜åŒ–UIæ˜¾ç¤º
- æ·»åŠ æ•°é‡æ˜¾ç¤ºåœ¨æ ‡é¢˜ä¸­
- æ”¹è¿›åŠ è½½çŠ¶æ€å’Œç©ºçŠ¶æ€å¤„ç†
- ä¼˜åŒ–hoveræ•ˆæœå’Œäº¤äº’ä½“éªŒ
- ä¿®å¤è¯­æ³•é”™è¯¯å’Œæ ‡ç­¾é—­åˆé—®é¢˜

### 3. æµ‹è¯•å·¥å…·
- **`scripts/test-genealogy-system.js`**: è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
- **`scripts/add-genealogy-test-data.sql`**: SQLæµ‹è¯•æ•°æ®
- **`app/test-genealogy/page.tsx`**: å‰ç«¯æµ‹è¯•é¡µé¢

## ğŸš€ å¦‚ä½•éªŒè¯åŠŸèƒ½

### æ–¹æ³•1: ä½¿ç”¨æµ‹è¯•é¡µé¢
```bash
# è®¿é—®æµ‹è¯•é¡µé¢
http://localhost:3000/test-genealogy
```

### æ–¹æ³•2: ç›´æ¥è®¿é—®ä½œå“
```bash
# è®¿é—®æ ¹ä½œå“é¡µé¢ï¼ŒæŸ¥çœ‹Creation Genealogyéƒ¨åˆ†
# ä½œå“ID 100: The Magical Forest
```

### æ–¹æ³•3: è¿è¡Œæµ‹è¯•è„šæœ¬
```bash
node scripts/test-genealogy-system.js
```

## ğŸ“ˆ é¢„æœŸæ˜¾ç¤ºæ•ˆæœ

```
ğŸŸ¢ Original Work
â””â”€â”€ The Magical Forest
    by 0x1111...1111 â€¢ 1/1/2024

ğŸŸ£ Official Continuations (2) by original creator
â”œâ”€â”€ The Magical Forest: Chapter 2
â”‚   by 0x1111...1111 â€¢ [date]
â””â”€â”€ The Magical Forest: Prequel  
    by 0x1111...1111 â€¢ [date]

ğŸ”µ Community Derivatives (2) by other creators
â”œâ”€â”€ Forest Creatures: A Side Story
â”‚   by 0x2222...2222 â€¢ [date]
â””â”€â”€ The Dark Side of the Forest
    by 0x3333...3333 â€¢ [date]

ğŸ“Š Creation Statistics
â”œâ”€â”€ Official continuations: 2
â”œâ”€â”€ Community derivatives: 2
â””â”€â”€ Total derivatives: 4
```

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### è§†è§‰å±‚æ¬¡
- ğŸŸ¢ ç»¿è‰²åœ†ç‚¹ï¼šåŸåˆ›ä½œå“
- ğŸŸ£ ç´«è‰²åœ†ç‚¹ï¼šå®˜æ–¹å»¶ç»­
- ğŸ”µ è“è‰²åœ†ç‚¹ï¼šç¤¾åŒºè¡ç”Ÿ
- æ¸…æ™°çš„æ—¶é—´çº¿å¸ƒå±€

### äº¤äº’ä½“éªŒ
- æ‚¬åœæ•ˆæœå¢å¼º
- åŠ è½½åŠ¨ç”»æŒ‡ç¤ºå™¨
- ç©ºçŠ¶æ€å‹å¥½æç¤º
- å“åº”å¼è®¾è®¡

### æ•°æ®å‡†ç¡®æ€§
- é€’å½’æŸ¥æ‰¾æ ¹ä½œå“
- æ­£ç¡®åˆ†ç±»è¡ç”Ÿç±»å‹
- å®æ—¶ç»Ÿè®¡æ›´æ–°
- å¤šå±‚å…³ç³»æ”¯æŒ

## ğŸ” æŠ€æœ¯å®ç°

### æ•°æ®åº“æŸ¥è¯¢
```sql
-- è·å–æ ¹ä½œå“çš„æ‰€æœ‰è¡ç”Ÿä½œå“
SELECT * FROM works 
WHERE parent_work_id = [root_work_id]
ORDER BY creation_type, created_at;

-- æŒ‰ç±»å‹åˆ†ç±»
-- 'author_continuation' â†’ Official Continuations
-- 'authorized_derivative' â†’ Community Derivatives
```

### å‰ç«¯æ¸²æŸ“
```typescript
// æ„å»ºæ˜¾ç¤ºæ•°æ®
const genealogyDisplay = {
  root: { /* æ ¹ä½œå“ä¿¡æ¯ */ },
  continuations: [ /* å®˜æ–¹å»¶ç»­åˆ—è¡¨ */ ],
  derivatives: [ /* ç¤¾åŒºè¡ç”Ÿåˆ—è¡¨ */ ]
}
```

## ğŸ“ åç»­æ‰©å±•å»ºè®®

1. **ç‚¹å‡»å¯¼èˆª**: ç‚¹å‡»è¡ç”Ÿä½œå“è·³è½¬åˆ°å¯¹åº”é¡µé¢
2. **ç­›é€‰åŠŸèƒ½**: æŒ‰æ—¶é—´ã€ç±»å‹ç­›é€‰æ˜¾ç¤º
3. **å¯è§†åŒ–**: æ·»åŠ æ ‘çŠ¶å›¾æˆ–ç½‘ç»œå›¾è§†å›¾
4. **é€šçŸ¥ç³»ç»Ÿ**: æ–°è¡ç”Ÿä½œå“é€šçŸ¥åŸä½œè€…
5. **æ‰¹é‡æ“ä½œ**: æ‰¹é‡ç®¡ç†è¡ç”Ÿä½œå“æƒé™

## âœ¨ æ€»ç»“

Creation GenealogyåŠŸèƒ½ç°åœ¨å®Œå…¨æ­£å¸¸å·¥ä½œï¼Œæä¾›äº†ï¼š
- **æ¸…æ™°çš„è§†è§‰å±‚æ¬¡** - ç”¨æˆ·èƒ½å¤Ÿä¸€ç›®äº†ç„¶åœ°çœ‹åˆ°ä½œå“çš„è¡ç”Ÿå…³ç³»
- **å‡†ç¡®çš„æ•°æ®ç»Ÿè®¡** - æ­£ç¡®åŒºåˆ†å’Œç»Ÿè®¡ä¸åŒç±»å‹çš„è¡ç”Ÿä½œå“  
- **è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ** - åŠ è½½çŠ¶æ€ã€ç©ºçŠ¶æ€ã€äº¤äº’æ•ˆæœéƒ½å¾—åˆ°ä¼˜åŒ–
- **å®Œæ•´çš„æµ‹è¯•è¦†ç›–** - æä¾›äº†å¤šç§æµ‹è¯•æ–¹æ³•éªŒè¯åŠŸèƒ½

ç”¨æˆ·ç°åœ¨å¯ä»¥åœ¨ä½œå“è¯¦æƒ…é¡µçœ‹åˆ°å®Œæ•´ã€å‡†ç¡®ã€ç¾è§‚çš„Creation Genealogyä¿¡æ¯ï¼ğŸŠ
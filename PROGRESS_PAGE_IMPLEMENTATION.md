# è¿›åº¦é¡µé¢å®ç° - è§£å†³è¿›åº¦æ¡é—ªçƒé—®é¢˜

## ğŸ¯ ç”¨æˆ·éœ€æ±‚
1. ç‚¹å‡»ä¸Šä¼ æŒ‰é’®åè·³è½¬åˆ°ä¸“é—¨çš„è¿›åº¦é¡µé¢
2. åœ¨è¿›åº¦é¡µé¢æ˜¾ç¤ºä¸Šä¼ è¿›åº¦å¹¶å¤„ç†é’±åŒ…æ“ä½œ
3. è§£å†³è¿›åº¦æ¡é—ªçƒé—®é¢˜
4. å®Œæˆåè¿”å›ç»“æœ

## ğŸ”§ å®ç°æ–¹æ¡ˆ

### 1. åˆ›å»ºä¸“é—¨çš„åŒºå—é“¾ä¸Šä¼ è¿›åº¦ç»„ä»¶
**æ–‡ä»¶**: `components/whichwitch/blockchain-upload-progress.tsx`

**ç‰¹ç‚¹**:
- å…¨å±è¿›åº¦é¡µé¢ï¼Œä¸“æ³¨äºä¸Šä¼ æµç¨‹
- æ¸…æ™°çš„æ­¥éª¤æ˜¾ç¤ºï¼šIPFS â†’ Metadata â†’ åŒºå—é“¾ â†’ æ•°æ®åº“
- å®æ—¶è¿›åº¦æ›´æ–°ï¼Œé¿å…é—ªçƒ
- é’±åŒ…æ“ä½œæç¤º
- é”™è¯¯å¤„ç†å’Œé‡è¯•åŠŸèƒ½

**è¿›åº¦æ­¥éª¤**:
```typescript
type UploadStatus = 'preparing' | 'ipfs' | 'metadata' | 'blockchain' | 'database' | 'success' | 'error'
```

### 2. ä¿®æ”¹ä¸Šä¼ ç»„ä»¶æµç¨‹
**æ–‡ä»¶**: `components/whichwitch/upload-view.tsx`

**ä¿®æ”¹**:
- ç‚¹å‡»æŒ‰é’®åç«‹å³è·³è½¬ï¼Œä¸åœ¨å½“å‰é¡µé¢æ˜¾ç¤ºè¿›åº¦
- ä¼ é€’ä¸Šä¼ æ•°æ®ç»™è¿›åº¦é¡µé¢
- ç§»é™¤å†…è”è¿›åº¦æ˜¾ç¤º
- ç®€åŒ–çŠ¶æ€ç®¡ç†

**æ–°æµç¨‹**:
```typescript
const handleSubmit = async (e: React.FormEvent) => {
  // å‡†å¤‡ä¸Šä¼ æ•°æ®
  const uploadData = {
    files,
    workData: { /* æ‰€æœ‰è¡¨å•æ•°æ® */ },
    creatorAddress: address,
    mode
  }
  
  // è·³è½¬åˆ°è¿›åº¦é¡µé¢
  onAddWork(uploadData)
}
```

### 3. æ›´æ–°åº”ç”¨å®¹å™¨
**æ–‡ä»¶**: `components/whichwitch/app-container.tsx`

**æ–°å¢çŠ¶æ€**:
```typescript
const [showBlockchainUpload, setShowBlockchainUpload] = useState(false)
const [blockchainUploadData, setBlockchainUploadData] = useState<any>(null)
```

**æµç¨‹æ§åˆ¶**:
1. ä¸Šä¼ ç»„ä»¶ â†’ è¿›åº¦é¡µé¢
2. è¿›åº¦é¡µé¢ â†’ ç»“æœé¡µé¢ æˆ– è¿”å›å¹¿åœº
3. ç»“æœé¡µé¢ â†’ å¹¿åœº

### 4. è§£å†³è¿›åº¦æ¡é—ªçƒçš„å…³é”®æ”¹è¿›

#### A. é¡ºåºä¸Šä¼ æ–‡ä»¶
```typescript
// ä¿®æ”¹å‰ï¼šå¹¶è¡Œä¸Šä¼ å¯¼è‡´é—ªçƒ
const imageHashes = await Promise.all(files.map(file => uploadFileToPinata(file)))

// ä¿®æ”¹åï¼šé¡ºåºä¸Šä¼ ï¼Œæ¸…æ™°è¿›åº¦
for (let i = 0; i < files.length; i++) {
  setCurrentFile(file.name)
  setProgress(10 + (i / files.length) * 20)
  const hash = await uploadFileToPinata(file)
  await new Promise(resolve => setTimeout(resolve, 200)) // è®©ç”¨æˆ·çœ‹åˆ°è¿›åº¦
}
```

#### B. æ˜ç¡®çš„è¿›åº¦é˜¶æ®µ
```typescript
// æ¯ä¸ªé˜¶æ®µæœ‰æ˜ç¡®çš„è¿›åº¦èŒƒå›´
setProgress(10)  // IPFSå¼€å§‹
setProgress(35)  // Metadataå¼€å§‹  
setProgress(60)  // åŒºå—é“¾å¼€å§‹
setProgress(90)  // æ•°æ®åº“å¼€å§‹
setProgress(100) // å®Œæˆ
```

#### C. è§†è§‰æ­¥éª¤æŒ‡ç¤ºå™¨
```typescript
const getStepStatus = (step: string) => {
  if (stepIndex < currentIndex) return 'completed'  // ç»¿è‰²
  if (stepIndex === currentIndex) return 'active'   // è“è‰²é—ªçƒ
  return 'pending'                                  // ç°è‰²
}
```

## ğŸ“‹ ä¿®æ”¹çš„æ–‡ä»¶

### æ–°å¢æ–‡ä»¶
1. **components/whichwitch/blockchain-upload-progress.tsx**
   - ä¸“é—¨çš„åŒºå—é“¾ä¸Šä¼ è¿›åº¦é¡µé¢
   - å®Œæ•´çš„ä¸Šä¼ æµç¨‹å¤„ç†
   - æ¸…æ™°çš„è¿›åº¦æ˜¾ç¤ºå’Œé”™è¯¯å¤„ç†

### ä¿®æ”¹æ–‡ä»¶
1. **components/whichwitch/upload-view.tsx**
   - ç®€åŒ–ä¸ºæ•°æ®æ”¶é›†å’ŒéªŒè¯
   - ç§»é™¤å†…è”è¿›åº¦æ˜¾ç¤º
   - ç‚¹å‡»åè·³è½¬åˆ°è¿›åº¦é¡µé¢

2. **components/whichwitch/app-container.tsx**
   - æ·»åŠ è¿›åº¦é¡µé¢çŠ¶æ€ç®¡ç†
   - å¤„ç†é¡µé¢é—´çš„è·³è½¬é€»è¾‘
   - é›†æˆæ–°çš„ä¸Šä¼ æµç¨‹

## âœ… è§£å†³çš„é—®é¢˜

### 1. è¿›åº¦æ¡é—ªçƒ
- **åŸå› **: å¹¶è¡Œä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œè¿›åº¦æ›´æ–°ä¸è¿ç»­
- **è§£å†³**: é¡ºåºä¸Šä¼ ï¼Œæ¯ä¸ªæ–‡ä»¶æœ‰æ˜ç¡®çš„è¿›åº¦èŒƒå›´

### 2. ç”¨æˆ·ä½“éªŒæ··ä¹±
- **åŸå› **: åœ¨è¡¨å•é¡µé¢æ˜¾ç¤ºè¿›åº¦ï¼Œç•Œé¢åˆ‡æ¢ä¸æ¸…æ™°
- **è§£å†³**: ä¸“é—¨çš„å…¨å±è¿›åº¦é¡µé¢ï¼Œä¸“æ³¨äºä¸Šä¼ æµç¨‹

### 3. é’±åŒ…æ“ä½œä¸æ˜ç¡®
- **åŸå› **: åŒºå—é“¾æ“ä½œæ—¶ç”¨æˆ·ä¸çŸ¥é“éœ€è¦ç¡®è®¤é’±åŒ…
- **è§£å†³**: æ˜ç¡®çš„"è¿æ¥é’±åŒ…å¹¶ä¸Šé“¾"æç¤ºå’Œé’±åŒ…å›¾æ ‡

### 4. é”™è¯¯å¤„ç†ä¸å®Œå–„
- **åŸå› **: é”™è¯¯æ—¶ç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•å¤„ç†
- **è§£å†³**: æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œé‡è¯•æŒ‰é’®

## ğŸ¯ ç”¨æˆ·ä½“éªŒæµç¨‹

### æ­¥éª¤1: å¡«å†™è¡¨å•
- ç”¨æˆ·åœ¨ä¸Šä¼ é¡µé¢å¡«å†™ä½œå“ä¿¡æ¯
- å¿…é¡»é€‰æ‹©licenseæ‰èƒ½æäº¤
- ç‚¹å‡»"Upload Work to Blockchain"

### æ­¥éª¤2: è¿›åº¦é¡µé¢
- ç«‹å³è·³è½¬åˆ°å…¨å±è¿›åº¦é¡µé¢
- æ˜¾ç¤ºä½œå“é¢„è§ˆå’Œä¸Šä¼ æ­¥éª¤
- å®æ—¶æ›´æ–°è¿›åº¦å’Œå½“å‰æ“ä½œ

### æ­¥éª¤3: åŒºå—é“¾æ“ä½œ
- æ˜ç¡®æç¤º"è¿æ¥é’±åŒ…å¹¶ä¸Šé“¾"
- æ˜¾ç¤ºé’±åŒ…å›¾æ ‡æé†’ç”¨æˆ·ç¡®è®¤
- æ˜¾ç¤ºäº¤æ˜“å“ˆå¸Œ

### æ­¥éª¤4: å®Œæˆ
- æ˜¾ç¤ºæˆåŠŸä¿¡æ¯å’Œäº¤æ˜“è¯¦æƒ…
- å¯ä»¥æŸ¥çœ‹ä½œå“æˆ–è¿”å›å¹¿åœº

## ğŸ§ª æµ‹è¯•è¦ç‚¹

1. **è¿›åº¦æ˜¾ç¤º**: ç¡®è®¤è¿›åº¦æ¡å¹³æ»‘æ›´æ–°ï¼Œæ— é—ªçƒ
2. **æ–‡ä»¶ä¸Šä¼ **: å¤šæ–‡ä»¶ä¸Šä¼ æ—¶æ˜¾ç¤ºå½“å‰æ–‡ä»¶å
3. **é’±åŒ…äº¤äº’**: åŒºå—é“¾æ­¥éª¤æ—¶æ­£ç¡®æç¤ºé’±åŒ…æ“ä½œ
4. **é”™è¯¯å¤„ç†**: å„ä¸ªæ­¥éª¤çš„é”™è¯¯éƒ½èƒ½æ­£ç¡®æ˜¾ç¤ºå’Œé‡è¯•
5. **é¡µé¢è·³è½¬**: å„ä¸ªé¡µé¢é—´çš„è·³è½¬é€»è¾‘æ­£ç¡®

## ğŸ“ æŠ€æœ¯äº®ç‚¹

- **çŠ¶æ€æœºè®¾è®¡**: æ¸…æ™°çš„ä¸Šä¼ çŠ¶æ€è½¬æ¢
- **è¿›åº¦å¯è§†åŒ–**: ç›´è§‚çš„æ­¥éª¤æŒ‡ç¤ºå™¨å’Œè¿›åº¦æ¡
- **é”™è¯¯æ¢å¤**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- **ç”¨æˆ·åé¦ˆ**: å®æ—¶çš„æ“ä½œæç¤ºå’ŒçŠ¶æ€æ›´æ–°